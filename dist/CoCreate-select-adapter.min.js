({init:function(){this.initElement(),this.__initEvents()},initElement:function(e){e=e||document;if(e.querySelectorAll)for(var t=e.querySelectorAll("cocreate-select, div.select--field"),n=0;n<t.length;n++)this.__initElementEvent(t[n])},__initEvents:function(){var n=this;document.addEventListener("dndsuccess",function(e){var t=e.detail,e=t.dropedEl;t.dragedEl;(void 0!==e.tagName&&"cocreate-select"==e.tagName.toLowerCase()||e.classList.contains("select--field"))&&(n.save(e),e.dispatchEvent(new CustomEvent("selectedValue")))}),document.addEventListener("CoCreateSelect-save",function(e){e=e.detail.element;e&&n.save(e)}),CoCreateSocket.listen("readDocument",function(e){CoCreateSelect.setValue(e)}),CoCreateSocket.listen("updateDocument",function(e){CoCreateSelect.setValue(e)})},__initElementEvent:function(e){var t=this;e.addEventListener("clicked-submitBtn",function(){t.save(this)}),e.addEventListener("set-document_id",function(){t.save(this)});var n=e.getAttribute("data-collection")||"module_activity",e=e.getAttribute("data-document_id");n&&e&&CoCreate.readDocument({collection:n,document_id:e})},save:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=CoCreateSelect.getValue(e),i=e.getAttribute("data-collection")||"module_activity",a=e.getAttribute("data-document_id"),c=e.getAttribute("name"),o=e.getAttribute("data-realtime")||"true";c&&("true"!=o&&!t||"false"==e.getAttribute("data-save_value")||(CoCreateDocument.checkID(e)?a&&CoCreate.updateDocument({collection:i,document_id:a,data:(i=n,(a=c)in(c={})?Object.defineProperty(c,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):c[a]=i,c),upsert:!0,metadata:""}):(CoCreateDocument.requestDocumentId(e,"name",n),e.setAttribute("data-document_id","pending"))))}}).init();